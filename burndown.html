<!DOCTYPE html>
<html>


<head>
	<title>Demo Gallery</title>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<!--  meta http-equiv="X-UA-Compatible" content="chrome=1" -->
	<script type="text/javascript" src="js/jquery.min.js"></script>
	<script type="text/javascript">
	jQuery.noConflict();
	</script>

	<script type="text/javascript" src="js/highcharts.js"></script>
	<script type="text/javascript" src="js/exporting.js"></script>
	<!-- Highslide code -->
	<script type="text/javascript" src="js/highslide-full.min.js"></script>
	<script type="text/javascript" src="js/highslide.config.js" charset="utf-8"></script>
	<link rel="stylesheet" type="text/css" href="css/highslide.css" />
	<!--[if lt IE 7]>
	<link rel="stylesheet" type="text/css" href="css/highslide-ie6.css" />
	<![endif]-->
	<!-- End Highslide code -->
	<script type="text/javascript" src="js/scripts.js"></script>
	<script type="text/javascript">
	Highcharts.theme = { colors: ['#4572A7'] };// prevent errors in default theme
	var highchartsOptions = Highcharts.getOptions(); 
	</script>
	<link rel="stylesheet" href="css/template.css" type="text/css" />
	<link rel="stylesheet" href="css/brown.css" type="text/css" />
	<link href="css/demo.css" rel="stylesheet" type="text/css" />
	<link href="css/960.css" rel="stylesheet" type="text/css" />
	<link href="css/main.css" rel="stylesheet" type="text/css" />
	<link href="css/jquery-ui-1.8.9.custom.css" rel="stylesheet" type="text/css" />
	<script type="text/javascript" src="js/jquery-ui-1.8.9.custom.min.js"></script>
	<!-- end of header -->

	<script type="text/javascript">
		//change here
		var scope = [57, 60, 60, 60, 60, 60, 60, 60]
		var planed = [3, 2]
		var finished = [1, 3]
	</script>

	<script type="text/javascript">
	Array.prototype.avg = function() {
		var av = 0;
		var cnt = 0;
		var len = this.length;
		for (var i = 0; i < len; i++) {
		var e = +this[i];
		if(!e && this[i] !== 0 && this[i] !== '0') e--;
		if (this[i] == e) {av += e; cnt++;}
		}
		return av/cnt;
	}
	Array.prototype.sum = function() {
		var result = 0;
		var len = this.length;
		for (var i = 0; i < len; i++) {
			result += this[i];
		}
		return result;
	}
	
	function accumulate(arry) {
		var accumulated = [];
		for(var i = 0; i < arry.length; i++) {
			if (i == 0) {
				accumulated[0] = arry[0]
			} else {
				accumulated[i] = arry[i] + accumulated[i-1]
			}
		}
		return accumulated
	}
	
	function predict(finished, average, length) {
		var predict = [];
		for(var i = 0; i < length; i++) {
			if (i < finished.length) {
	 			predict[i] = finished[i];
			} else {
				predict[i] = average
			}
		}
		return predict	
	}
	
	var iterations = ['Iter 0', 'Iter 0', 'Iter 1', 'Iter 2', 'Iter 3','Iter 4','Iter 5', 'Iter 6']

	var accumulated_finished = accumulate(finished);
	var average = finished.avg()
	var predict = accumulate(predict(finished, average, iterations.length));

	var chart;
			jQuery(document).ready(function() {
				chart = new Highcharts.Chart({
					chart: {
						renderTo: 'container'
					},
					title: {
						text: 'REA Subscription Reporting'
					},
					xAxis: {
						categories: iterations
					},
					tooltip: {
						formatter: function() {
							return  this.x  +': '+ this.y;
						}
					},
					credits: {
						enabled:true,
						text:'realestate.com.au',
						href:"http://realestate.com.au"
					},
					yAxis: {
						title: {
							text: 'Story Point'
						}
					},
					plotOptions: {
						line: {
							dataLabels: {
								enabled: true
							},
							enableMouseTracking: false
						}
					},
					labels: {
						items: [{
							html: 'Finished ' + finished.sum() + ' points in total',
							style: {
								left: '40px',
								top: '8px',
								color: 'black'				
							}
						}]
					},
					series: [{
						type: 'column',
						name: 'Planed',
						data: planed
					}, {
						type: 'column',
						name: 'Finished',
						data: finished
					}, {
						type: 'line',
						name: 'Actual finished',
						data: scope
					}, {
							type: 'line',
							name: 'Prediction',
							dashStyle: 'longdash',
							color: 'blue',
							data: predict
						},
					{
						type: 'line',
						name: 'Scope',
						data: accumulated_finished
					}]
				});
			});
	</script>
			
		</head>

		<body>
			<div class="container container_12">
				<div id="container">
					<h1>Share of sold listing</h1>
				</div>				
			</div>
		</body>

</html>

